<html>
<head>
<title>js.js Cookie Security</title>
<script type="text/javascript" src="../../src/libjs.O2.js"></script>
<script type="text/javascript" src="../../src/jsjs-wrapper.js"></script>
<script type="text/javascript">

var scriptSrc = "document.getElementById('demo').innerHTML = document.cookie;";
  function start_jsjs() {
      var jsObjs = JSJS.Init();
      var ok = JSJS.InitDocument(jsObjs, 'locked');
      JSJS.UnlockElement(document.getElementById('demo'));
      
      // Everything has gone well, execute script
      rval = JSJS.EvaluateScript(jsObjs.cx, jsObjs.glob, scriptSrc);
      if (rval) {
          //Convert the JSVal to 'the right thing' 
          d = JSJS.identifyConvertValue(jsObjs.cx, rval);
      } else {
          d = "Can't get result because an error happened.";
      }
  
      // This is how you do a proper shut down
      JSJS.End(jsObjs);
  }

  function unprotected() { eval(scriptSrc); };

  </script>
</head>
<body>
    <script type="text/javascript"> document.cookie = "something=Thecookieshavebeenstolen"; </script>
    <h1>js.js Cookie Security Test</h1>
    <form>
    
      <input type="button" value="Protected" onclick="start_jsjs()" >
      <input type="button" value="Native" onclick="unprotected()" >
    </form>
   
    Document cookie:<div id="demo"></div>
</body>
</html>
